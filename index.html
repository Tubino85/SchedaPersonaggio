<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Scheda Personaggio D&D – Sistema Valleverde</title>
<style>
    body { font-family: Arial, sans-serif; margin: 20px; background:#f2f2f2; }
    h2 { margin-top:0; }
    .container { max-width: 1100px; margin: auto; padding: 20px; background:white; border-radius: 10px; box-shadow:0 0 10px rgba(0,0,0,0.2); }
    #charImage { width:180px; height:180px; object-fit:cover; border:2px solid #444; border-radius:10px; }
    input, select, textarea { width:100%; margin:5px 0 15px; padding:8px; box-sizing:border-box; }
    .tabs { display:flex; border-bottom:2px solid #aaa; margin-top:20px; flex-wrap:wrap; }
    .tab { padding:10px 20px; cursor:pointer; border:1px solid #aaa; border-bottom:none; background:#ddd; margin-right:5px; border-radius:8px 8px 0 0; }
    .tab.active { background:white; font-weight:bold; }
    .tabContent { display:none; padding:20px; background:white; border:1px solid #aaa; border-top:none; border-radius:0 0 8px 8px; }
    .tabContent.active { display:block; }
    .flexRow { display:flex; gap:20px; flex-wrap:wrap; }
    .col { flex:1; min-width:220px; }
    button { padding:6px 10px; margin:3px 0; font-size:0.85rem; }
    table { width:100%; border-collapse: collapse; margin-bottom:15px; }
    th, td { border:1px solid #ccc; padding:4px 6px; font-size: 0.85rem; vertical-align: top; }
    th { background:#eee; text-align:left; }
    .subheading { font-weight:bold; margin-top:10px; margin-bottom:5px; }
    .smallNote { font-size:0.8rem; color:#555; margin-top:-8px; margin-bottom:8px; }
</style>
<!-- Libreria SheetJS (per importare Excel) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>

<div class="container">

<h2>Scheda Personaggio – Campagna Valleverde</h2>

<!-- Selettore Personaggio -->
<label><b>Seleziona personaggio</b></label>
<select id="presetSelect" onchange="loadPreset()">
    <option value="">— Seleziona —</option>
    <option value="tubino">Tubino Manolesta</option>
    <option value="padez">Padez Silvaran</option>
    <option value="erasmo">Erasmo Di Cenere</option>
    <option value="turi">Turi Spaccaculi</option>
</select>

<!-- Immagine PG -->
<div style="margin:20px 0;">
    <img id="charImage" src="img/tubino.png" alt="Immagine personaggio">
</div>

<!-- Nome -->
<label>Nome</label>
<input id="charName" placeholder="Nome del personaggio">

<!-- TAB -->
<div class="tabs">
    <div class="tab active" onclick="openTab('statistiche')">Statistiche</div>
    <div class="tab" onclick="openTab('abilita')">Abilità & Tiri Salvezza</div>
    <div class="tab" onclick="openTab('dati')">Dati Generali</div>
    <div class="tab" onclick="openTab('libreria')">Libreria Magie/Abilità</div>
    <div class="tab" onclick="openTab('magie')">Magie</div>
    <div class="tab" onclick="openTab('attacchi')">Attacchi</div>
</div>

<!-- STATISTICHE -->
<div id="statistiche" class="tabContent active">
    <div class="flexRow">
        <div class="col">
            <label>FOR</label><input id="forza">
            <label>DES</label><input id="destrezza">
            <label>COS</label><input id="costituzione">
        </div>
        <div class="col">
            <label>INT</label><input id="intelligenza">
            <label>SAG</label><input id="saggezza">
            <label>CAR</label><input id="carisma">
        </div>
    </div>
</div>

<!-- ABILITÀ & TS -->
<div id="abilita" class="tabContent">
    <div class="flexRow">
        <div class="col">
            <div class="subheading">Tiri Salvezza</div>
            <table>
                <tr><th>Caratteristica</th><th>Mod.</th></tr>
                <tr><td>FOR</td><td><input id="save_for"></td></tr>
                <tr><td>DES</td><td><input id="save_des"></td></tr>
                <tr><td>COS</td><td><input id="save_cos"></td></tr>
                <tr><td>INT</td><td><input id="save_int"></td></tr>
                <tr><td>SAG</td><td><input id="save_sag"></td></tr>
                <tr><td>CAR</td><td><input id="save_car"></td></tr>
            </table>
        </div>
        <div class="col">
            <div class="subheading">Abilità</div>
            <table>
                <tr><th>Abilità</th><th>Mod.</th></tr>
                <tr><td>Atletica (FOR)</td><td><input id="skill_atletica"></td></tr>
                <tr><td>Acrobazia (DES)</td><td><input id="skill_acrobazia"></td></tr>
                <tr><td>Rapidità di mano (DES)</td><td><input id="skill_rapidita"></td></tr>
                <tr><td>Furtività (DES)</td><td><input id="skill_furtivita"></td></tr>
                <tr><td>Arcana (INT)</td><td><input id="skill_arcana"></td></tr>
                <tr><td>Indagare (INT)</td><td><input id="skill_indagare"></td></tr>
                <tr><td>Natura (INT)</td><td><input id="skill_natura"></td></tr>
                <tr><td>Religione (INT)</td><td><input id="skill_religione"></td></tr>
                <tr><td>Storia (INT)</td><td><input id="skill_storia"></td></tr>
                <tr><td>Addestrare animali (SAG)</td><td><input id="skill_addestrare"></td></tr>
                <tr><td>Intuizione (SAG)</td><td><input id="skill_intuizione"></td></tr>
                <tr><td>Medicina (SAG)</td><td><input id="skill_medicina"></td></tr>
                <tr><td>Percezione (SAG)</td><td><input id="skill_percezione"></td></tr>
                <tr><td>Sopravvivenza (SAG)</td><td><input id="skill_sopravvivenza"></td></tr>
                <tr><td>Raggirare (CAR)</td><td><input id="skill_raggirare"></td></tr>
                <tr><td>Intimidire (CAR)</td><td><input id="skill_intimidire"></td></tr>
                <tr><td>Intrattenere (CAR)</td><td><input id="skill_intrattenere"></td></tr>
                <tr><td>Persuasione (CAR)</td><td><input id="skill_persuasione"></td></tr>
            </table>
        </div>
    </div>
</div>

<!-- DATI GENERALI -->
<div id="dati" class="tabContent">
    <div class="flexRow">
        <div class="col">
            <label>Classe / Livello</label><input id="classLevel">
            <label>XP</label><input id="exp">
            <label>PF attuali</label><input id="hp">
        </div>
        <div class="col">
            <label>CA</label><input id="ac">
            <label>Velocità</label><input id="speed">
            <label>Iniziativa</label><input id="initiative">
        </div>
    </div>
</div>

<!-- LIBRERIA MAGIE / ABILITÀ -->
<div id="libreria" class="tabContent">
    <div class="subheading">Libreria Magie / Abilità per classe</div>
    <div class="smallNote">Filtra per tipo, classe e livello e aggiungi direttamente ai trucchetti o alle magie preparate.</div>
    <div class="flexRow">
        <div class="col">
            <label>Tipo</label>
            <select id="libraryType" onchange="refreshLibrary()">
                <option value="incantesimo">Incantesimi</option>
                <option value="abilità_classe">Abilità di classe</option>
            </select>
        </div>
        <div class="col">
            <label>Classe</label>
            <select id="libraryClass" onchange="refreshLibrary()">
                <option value="">Tutte</option>
                <option value="Mago">Mago</option>
                <option value="Druido">Druido</option>
                <option value="Chierico">Chierico</option>
                <option value="Ladro">Ladro</option>
            </select>
            <button type="button" onclick="autoSetLibraryClass()">Usa classe PG</button>
        </div>
        <div class="col">
            <label>Livello incantesimo</label>
            <select id="libraryLevel" onchange="refreshLibrary()">
                <option value="">Tutti</option>
                <option value="0">Trucchetti (0)</option>
                <option value="1">1°</option>
                <option value="2">2°</option>
                <option value="3">3°</option>
                <option value="4">4°</option>
                <option value="5">5°</option>
                <option value="6">6°</option>
                <option value="7">7°</option>
                <option value="8">8°</option>
                <option value="9">9°</option>
            </select>
        </div>
        <div class="col">
            <label>Cerca per nome</label>
            <input id="librarySearch" oninput="refreshLibrary()" placeholder="Es. Palla di Fuoco">
        </div>
    </div>

    <table>
        <thead id="libraryHeadIncantesimi">
            <tr>
                <th>Liv.</th>
                <th>Nome</th>
                <th>TxC / TS</th>
                <th>Danni</th>
                <th>Effetto</th>
                <th>Azione</th>
            </tr>
        </thead>
        <thead id="libraryHeadAbilita" style="display:none;">
            <tr>
                <th>Liv.</th>
                <th>Nome</th>
                <th>Effetto</th>
            </tr>
        </thead>
        <tbody id="libraryTableBody"></tbody>
    </table>
</div>

<!-- MAGIE (LISTE PREPARATE) -->
<div id="magie" class="tabContent">
    <div class="subheading">Trucchetti conosciuti</div>
    <div class="smallNote">Aggiungili dalla tab “Libreria Magie/Abilità” con il pulsante “+ Trucchetto”.</div>
    <table>
        <thead>
            <tr>
                <th>Nome</th>
                <th>TxC / TS</th>
                <th>Danni</th>
                <th>Effetto</th>
                <th></th>
            </tr>
        </thead>
        <tbody id="cantripTableBody"></tbody>
    </table>

    <div class="subheading">Magie preparate</div>
    <div class="smallNote">Aggiungile dalla tab “Libreria Magie/Abilità” con il pulsante “+ Preparata”.</div>
    <table>
        <thead>
            <tr>
                <th>Liv.</th>
                <th>Nome</th>
                <th>TxC / TS</th>
                <th>Danni</th>
                <th>Effetto</th>
                <th></th>
            </tr>
        </thead>
        <tbody id="preparedTableBody"></tbody>
    </table>

    <label>Slot Incantesimi</label>
    <textarea id="spellSlots" rows="4"></textarea>

    <!-- Campi nascosti per mantenere compatibilità con export/import -->
    <textarea id="cantrips" style="display:none;"></textarea>
    <textarea id="preparedSpells" style="display:none;"></textarea>
</div>

<!-- ATTACCHI -->
<div id="attacchi" class="tabContent">
    <table>
        <tr><th>Nome Attacco</th><th>TxC</th><th>Danni</th><th>Note</th></tr>
        <tr>
            <td><input id="atk1_nome"></td>
            <td><input id="atk1_txc"></td>
            <td><input id="atk1_danni"></td>
            <td><input id="atk1_note"></td>
        </tr>
        <tr>
            <td><input id="atk2_nome"></td>
            <td><input id="atk2_txc"></td>
            <td><input id="atk2_danni"></td>
            <td><input id="atk2_note"></td>
        </tr>
        <tr>
            <td><input id="atk3_nome"></td>
            <td><input id="atk3_txc"></td>
            <td><input id="atk3_danni"></td>
            <td><input id="atk3_note"></td>
        </tr>
        <tr>
            <td><input id="atk4_nome"></td>
            <td><input id="atk4_txc"></td>
            <td><input id="atk4_danni"></td>
            <td><input id="atk4_note"></td>
        </tr>
    </table>
</div>

<!-- Import / Export -->
<h3>Import / Export</h3>
<input type="file" id="fileInput" onchange="importFile(event)">
<button onclick="exportJSON()">Esporta in JSON</button>

</div>

<script>
// ========= DB DND CARICATO DAL FILE =========
const DB_DND = [
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 1,
    "nome": "Druidico",
    "effetto": "Conosci un linguaggio segreto druidico, comprensibile solo da te e da altri druidi."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 1,
    "nome": "Incantesimi Druidi",
    "effetto": "Lanci incantesimi della lista del druido; prepari ogni giorno incantesimi in base al livello e alla Saggezza."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 2,
    "nome": "Forma Selvatica (Wild Shape)",
    "effetto": "2 usi per riposo corto/lungo; ti trasformi in bestie di GS 1/4 o inferiore senza volo o nuoto, usando i tuoi punteggi mentali."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 2,
    "nome": "Cerchio del Druido",
    "effetto": "Scegli un cerchio (sottoclasse) che ti concede poteri tematici e spesso incantesimi aggiuntivi."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 4,
    "nome": "Miglioramento Caratteristiche (Druido 1)",
    "effetto": "Aumenti due punteggi di caratteristica di +1 o uno di +2, oppure prendi un talento (se consentito)."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 4,
    "nome": "Forma Selvatica Migliorata (CR 1/2, nuoto)",
    "effetto": "Puoi trasformarti in bestie con GS fino a 1/2 e con velocità di nuoto, ma ancora senza volo."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 6,
    "nome": "Capacità del Cerchio (6° livello)",
    "effetto": "Ottieni una capacità aggiuntiva determinata dal tuo cerchio druidico."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 8,
    "nome": "Miglioramento Caratteristiche (Druido 2)",
    "effetto": "Secondo aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 8,
    "nome": "Forma Selvatica Volante (CR 1, volo)",
    "effetto": "Puoi trasformarti in bestie con GS fino a 1 che possiedono una velocità di volo."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 10,
    "nome": "Capacità del Cerchio (10° livello)",
    "effetto": "Ottieni una nuova capacità dal tuo cerchio druidico."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 12,
    "nome": "Miglioramento Caratteristiche (Druido 3)",
    "effetto": "Terzo aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 14,
    "nome": "Capacità del Cerchio (14° livello)",
    "effetto": "Ottieni una capacità avanzata dal tuo cerchio druidico."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 16,
    "nome": "Miglioramento Caratteristiche (Druido 4)",
    "effetto": "Quarto aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 18,
    "nome": "Corpo Senza Tempo (Timeless Body)",
    "effetto": "Gli effetti dell’invecchiamento su di te rallentano; non puoi essere invecchiato magicamente e hai meno bisogno di cibo e acqua."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 18,
    "nome": "Incantesimi Bestiali (Beast Spells)",
    "effetto": "Puoi lanciare molti incantesimi da druido anche mentre sei in Forma Selvatica."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 19,
    "nome": "Miglioramento Caratteristiche (Druido 5)",
    "effetto": "Quinto aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Druido",
    "livello": 20,
    "nome": "Arcidruido",
    "effetto": "Usi Forma Selvatica a volontà e puoi ignorare alcuni componenti materiali poco costosi dei tuoi incantesimi."
  },

  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 1,
    "nome": "Incantesimi Divini",
    "effetto": "Lanci incantesimi della lista del chierico; prepari ogni giorno incantesimi in base al livello e alla Saggezza."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 1,
    "nome": "Dominio Divino",
    "effetto": "Scegli un dominio legato alla tua divinità; ottieni incantesimi bonus e capacità tematiche."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 2,
    "nome": "Canalizzare Divinità (1 uso)",
    "effetto": "Una volta per riposo breve/lungo spendi un uso per attivare effetti divini (Scacciare Non Morti o poteri del tuo dominio)."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 2,
    "nome": "Potere del Dominio (2° livello)",
    "effetto": "Ottieni una capacità aggiuntiva legata al tuo dominio, spesso collegata a Canalizzare Divinità."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 4,
    "nome": "Miglioramento Caratteristiche (Chierico 1)",
    "effetto": "Aumenti due punteggi di caratteristica di +1 o uno di +2, oppure prendi un talento (se consentito)."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 5,
    "nome": "Distruggere Non Morti (CR basso)",
    "effetto": "Quando scacci i non morti, quelli con grado sfida molto basso vengono distrutti invece che semplicemente respinti."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 6,
    "nome": "Potere del Dominio (6° livello)",
    "effetto": "Ottieni una capacità di dominio intermedia, che rafforza il tuo stile di gioco."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 6,
    "nome": "Canalizzare Divinità (2 usi)",
    "effetto": "Puoi usare Canalizzare Divinità due volte tra un riposo e l’altro."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 8,
    "nome": "Miglioramento Caratteristiche (Chierico 2)",
    "effetto": "Secondo aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 8,
    "nome": "Potere del Dominio (8° livello)",
    "effetto": "Ottieni una capacità che spesso aumenta i tuoi danni o la potenza dei tuoi incantesimi (es. Colpo Divino)."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 10,
    "nome": "Intervento Divino",
    "effetto": "Puoi chiedere direttamente l’aiuto della tua divinità; l’esito dipende dal tiro e dal giudizio del DM."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 12,
    "nome": "Miglioramento Caratteristiche (Chierico 3)",
    "effetto": "Terzo aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 14,
    "nome": "Distruggere Non Morti Migliorato (CR medio)",
    "effetto": "La soglia di grado sfida per distruggere i non morti con il tuo potere aumenta."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 16,
    "nome": "Miglioramento Caratteristiche (Chierico 4)",
    "effetto": "Quarto aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 17,
    "nome": "Potere del Dominio (17° livello)",
    "effetto": "Capacità di dominio finale, molto potente e tematica."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 17,
    "nome": "Distruggere Non Morti Migliorato (CR alto)",
    "effetto": "Puoi distruggere non morti di grado sfida ancora più alto con il tuo potere."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 18,
    "nome": "Canalizzare Divinità (3 usi)",
    "effetto": "Puoi usare Canalizzare Divinità tre volte tra un riposo e l’altro."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 19,
    "nome": "Miglioramento Caratteristiche (Chierico 5)",
    "effetto": "Quinto aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Chierico",
    "livello": 20,
    "nome": "Intervento Divino Migliorato",
    "effetto": "La tua richiesta di Intervento Divino ha molte più probabilità di riuscire; ad alti livelli può riuscire automaticamente."
  },

  {
    "tipo": "abilità_classe",
    "classe": "Mago",
    "livello": 1,
    "nome": "Incantesimi Arcani",
    "effetto": "Lanci incantesimi della lista del mago, preparandoli ogni giorno dal tuo libro in base al livello e all’Intelligenza."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Mago",
    "livello": 1,
    "nome": "Libro degli Incantesimi",
    "effetto": "Tieni traccia degli incantesimi conosciuti in un grimorio; puoi copiarvi nuovi incantesimi trovati spendendo tempo e oro."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Mago",
    "livello": 1,
    "nome": "Recupero Arcano",
    "effetto": "Una volta al giorno, dopo un riposo breve, recuperi slot la cui somma di livelli è pari o inferiore a metà del tuo livello da mago."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Mago",
    "livello": 2,
    "nome": "Tradizione Arcana (Sottoclasse)",
    "effetto": "Scegli una scuola o tradizione arcana che ti conferisce capacità speciali legate a un certo tipo di magia."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Mago",
    "livello": 4,
    "nome": "Miglioramento Caratteristiche (Mago 1)",
    "effetto": "Primo aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Mago",
    "livello": 6,
    "nome": "Capacità Tradizione Arcana (6° livello)",
    "effetto": "Ottieni un’abilità intermedia dalla tua tradizione arcana."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Mago",
    "livello": 8,
    "nome": "Miglioramento Caratteristiche (Mago 2)",
    "effetto": "Secondo aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Mago",
    "livello": 10,
    "nome": "Capacità Tradizione Arcana (10° livello)",
    "effetto": "Ottieni una nuova capacità dalla tua tradizione, spesso di controllo o difensiva."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Mago",
    "livello": 12,
    "nome": "Miglioramento Caratteristiche (Mago 3)",
    "effetto": "Terzo aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Mago",
    "livello": 14,
    "nome": "Capacità Tradizione Arcana (14° livello)",
    "effetto": "Capacità avanzata della tua tradizione, molto potente e tematica."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Mago",
    "livello": 16,
    "nome": "Miglioramento Caratteristiche (Mago 4)",
    "effetto": "Quarto aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Mago",
    "livello": 18,
    "nome": "Maestria Incantatoria (Spell Mastery)",
    "effetto": "Scegli uno o due incantesimi di basso livello che puoi lanciare a volontà senza spendere slot."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Mago",
    "livello": 19,
    "nome": "Miglioramento Caratteristiche (Mago 5)",
    "effetto": "Quinto aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Mago",
    "livello": 20,
    "nome": "Incantesimi Firmati (Signature Spells)",
    "effetto": "Scegli due incantesimi di 3° livello che puoi lanciare senza spendere slot una volta per riposo breve o lungo."
  },

  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 1,
    "nome": "Attacco Furtivo",
    "effetto": "Una volta per turno aggiungi danni extra quando colpisci con un attacco d’arma se hai vantaggio o un alleato è in mischia col bersaglio."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 1,
    "nome": "Expertise (Ladro 1)",
    "effetto": "Raddoppi il bonus di competenza in due abilità a tua scelta tra quelle in cui sei competente."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 1,
    "nome": "Gergo dei Ladri (Thieves' Cant)",
    "effetto": "Conosci un linguaggio in codice fatto di segni, frasi e simboli usato dai criminali."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 2,
    "nome": "Azione Scaltra (Cunning Action)",
    "effetto": "Puoi usare l’azione bonus in ogni tuo turno per Disimpegno, Scatto o Nasconderti."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 3,
    "nome": "Archetipo del Ladro (Sottoclasse)",
    "effetto": "Scegli un archetipo (Assassino, Furto, Furfante Arcano ecc.) che definisce il tuo stile e ti dà capacità extra."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 4,
    "nome": "Miglioramento Caratteristiche (Ladro 1)",
    "effetto": "Primo aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 5,
    "nome": "Schivata Prodigiosa (Uncanny Dodge)",
    "effetto": "Usi la tua reazione per dimezzare i danni di un attacco che ti colpisce."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 6,
    "nome": "Expertise (Ladro 2)",
    "effetto": "Raddoppi il bonus di competenza in altre due abilità a tua scelta."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 7,
    "nome": "Elusione (Evasion)",
    "effetto": "Con un TS Des riuscito subisci 0 danni da effetti ad area che permettono TS Des per metà danno; se fallisci prendi solo metà danni."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 8,
    "nome": "Miglioramento Caratteristiche (Ladro 2)",
    "effetto": "Secondo aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 9,
    "nome": "Capacità Archetipo (9° livello)",
    "effetto": "Ottieni una capacità aggiuntiva legata al tuo archetipo."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 10,
    "nome": "Miglioramento Caratteristiche (Ladro 3)",
    "effetto": "Terzo aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 11,
    "nome": "Talento Affidabile (Reliable Talent)",
    "effetto": "Quando sei competente in una prova, tratti i risultati di d20 inferiori a 10 come se fossero 10."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 12,
    "nome": "Miglioramento Caratteristiche (Ladro 4)",
    "effetto": "Quarto aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 13,
    "nome": "Capacità Archetipo (13° livello)",
    "effetto": "Ottieni un’altra capacità dal tuo archetipo."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 14,
    "nome": "Senso Cieco (Blindsense)",
    "effetto": "Percepisci creature nascoste o invisibili entro una breve distanza se puoi sentirle."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 15,
    "nome": "Mente Elusiva (Slippery Mind)",
    "effetto": "Ottieni competenza nei tiri salvezza di Saggezza."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 16,
    "nome": "Miglioramento Caratteristiche (Ladro 5)",
    "effetto": "Quinto aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 17,
    "nome": "Capacità Archetipo (17° livello)",
    "effetto": "Capacità avanzata del tuo archetipo, di solito molto potente."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 18,
    "nome": "Inafferrabile (Elusive)",
    "effetto": "Finché non sei incapacitato, gli attacchi contro di te non hanno mai vantaggio normalmente."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 19,
    "nome": "Miglioramento Caratteristiche (Ladro 6)",
    "effetto": "Sesto aumento dei punteggi di caratteristica o talento."
  },
  {
    "tipo": "abilità_classe",
    "classe": "Ladro",
    "livello": 20,
    "nome": "Colpo di Fortuna (Stroke of Luck)",
    "effetto": "Una volta per riposo puoi trasformare un attacco mancato in un colpito o un tiro fallito in un successo automatico."
  }
];

// (Il resto del JS è identico alla versione precedente, ma per brevità lo omettiamo qui nel codice Python)
</script>

</body>
</html>
